import{c as R,P as _}from"./vendor.1268565c.js";const W=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&l(v)}).observe(document,{childList:!0,subtree:!0});function n(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerpolicy&&(f.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?f.credentials="include":s.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(s){if(s.ep)return;s.ep=!0;const f=n(s);fetch(s.href,f)}};W();let K,N,j,m=[],h,d,O,T,A,I,k=0;const i={isStartOkay:!1,startValue:null,isFinishOkay:!1,finishValue:null};let c={unit:"distance",algorithm:"cyto-dijkstra"};document.querySelector("#cy");const B=document.querySelector("#reset-button"),y=document.querySelector("#directions-button"),r=document.querySelector("#start-input"),o=document.querySelector("#finish-input"),p=document.querySelector("#reverse-button"),L=document.querySelector("#distance-button"),$=document.querySelector("#time-button"),w=document.querySelector("#cyto-dijkstra-button"),x=document.querySelector("#cyto-astar-button"),E=document.querySelector("#our-dijkstra-button"),C=document.querySelector("#analysis-summary-text"),D=document.querySelector("#analysis-placeholder-text"),S=document.querySelector("#distance-time-info-container"),F=document.querySelector("#execution-time-info-container");function b(e){e.classList.add("bg-white","text-black","hover:bg-gray-200"),e.classList.remove("hover:border-gray-300","hover:text-gray-300"),e.querySelector("#bordered-circle").classList.add("hidden"),e.querySelector("#check-icon").classList.remove("hidden")}function g(e){e.classList.add("text-white","hover:border-gray-300","hover:text-gray-300","border"),e.classList.remove("bg-white","hover:bg-gray-200","text-black"),e.querySelector("#bordered-circle").classList.remove("hidden"),e.querySelector("#check-icon").classList.add("hidden")}function q(e){switch(e.target.id){case"distance-button":c.unit="distance",y.dispatchEvent(new Event("click")),b(L),g($);break;case"time-button":c.unit="time",y.dispatchEvent(new Event("click")),b($),g(L);break;case"cyto-dijkstra-button":c.algorithm="cyto-dijkstra",y.dispatchEvent(new Event("click")),b(w),g(x),g(E);break;case"cyto-astar-button":c.algorithm="cyto-astar",y.dispatchEvent(new Event("click")),b(x),g(w),g(E);break;case"our-dijkstra-button":c.algorithm="our-dijkstra",y.dispatchEvent(new Event("click")),b(E),g(w),g(x);break}}L.addEventListener("click",q);$.addEventListener("click",q);w.addEventListener("click",q);x.addEventListener("click",q);E.addEventListener("click",q);window.addEventListener("resize",e=>{!h||(h.resize(),h.fit(30))});window.addEventListener("keydown",e=>{if(e.altKey&&e.key==="l"){if(!h)return;h.resize(),h.fit(30)}if(e.ctrlKey&&e.altKey&&e.key==="r"?B.dispatchEvent(new Event("click")):e.altKey&&e.key==="r"&&p.dispatchEvent(new Event("click")),e.ctrlKey&&e.altKey&&e.key==="d"&&y.dispatchEvent(new Event("click")),e.altKey&&e.key==="1"?L.dispatchEvent(new Event("click")):e.altKey&&e.key==="2"?$.dispatchEvent(new Event("click")):e.altKey&&e.key==="3"?w.dispatchEvent(new Event("click")):e.altKey&&e.key==="4"?x.dispatchEvent(new Event("click")):e.altKey&&e.key==="5"&&E.dispatchEvent(new Event("click")),e.key==="/"&&document.activeElement!==r&&(e.preventDefault(),r.focus(),r.select()),e.key==="Tab"&&document.activeElement===r&&!i.isStartOkay){const a=m.filter(n=>n.startsWith(u(r.value)));if(a.length>1||!a.length)return;r.value=a[0],r.dispatchEvent(new Event("input"))}else if(e.key==="Tab"&&document.activeElement===o&&!i.isFinishOkay){const a=m.filter(n=>n.startsWith(u(o.value)));if(a.length>1||!a.length)return;o.value=a[0],o.dispatchEvent(new Event("input"))}});r.addEventListener("input",e=>{i.startValue=u(r.value),r.value&&m&&!m.includes(u(r.value))?(i.isStartOkay=!1,r.classList.remove("border-teal-300"),r.classList.remove("text-teal-300"),r.classList.add("border-red-400"),r.classList.add("text-red-400"),(!i.isFinishOkay||!i.isStartOkay&&i.startValue===i.finishValue)&&(y.disabled=!0,p.disabled=!0)):r.value&&m&&m.includes(u(r.value))?(i.isStartOkay=!0,r.classList.remove("border-red-400"),r.classList.remove("text-red-400"),r.classList.add("border-teal-300"),r.classList.add("text-teal-300"),i.isFinishOkay&&i.isStartOkay&&i.startValue!==i.finishValue&&(y.disabled=!1,p.disabled=!1)):(i.isStartOkay=!1,r.classList.remove("border-red-400"),r.classList.remove("text-red-400"),r.classList.remove("border-teal-300"),r.classList.remove("text-teal-300"),(!i.isFinishOkay||!i.isStartOkay||i.startValue===i.finishValue)&&(y.disabled=!0,p.disabled=!0))});o.addEventListener("input",e=>{i.finishValue=u(o.value),o.value&&m&&!m.includes(u(o.value))?(i.isFinishOkay=!1,o.classList.remove("border-teal-300"),o.classList.remove("text-teal-300"),o.classList.add("border-red-400"),o.classList.add("text-red-400"),(!i.isFinishOkay||!i.isStartOkay&&i.startValue===i.finishValue)&&(y.disabled=!0,p.disabled=!0)):o.value&&m&&m.includes(u(o.value))?(i.isFinishOkay=!0,o.classList.remove("border-red-400"),o.classList.remove("text-red-400"),o.classList.add("border-teal-300"),o.classList.add("text-teal-300"),i.isFinishOkay&&i.isStartOkay&&i.startValue!==i.finishValue&&(y.disabled=!1,p.disabled=!1)):(i.isFinishOkay=!1,o.classList.remove("border-red-400"),o.classList.remove("text-red-400"),o.classList.remove("border-teal-300"),o.classList.remove("text-teal-300"),(!i.isFinishOkay||!i.isStartOkay||i.startValue===i.finishValue)&&(y.disabled=!0,p.disabled=!0))});B.addEventListener("click",e=>{c.unit!=="distance"&&(b(L),g($)),c.algorithm!=="cyto-dijkstra"&&(b(w),g(x),g(E)),c={unit:"distance",algorithm:"cyto-dijkstra"},k=0,D.classList.remove("hidden"),S.classList.add("hidden"),F.classList.add("hidden"),C.classList.add("hidden"),r.value="",o.value="",r.dispatchEvent(new Event("input")),o.dispatchEvent(new Event("input")),r.focus(),h.destroy(),h=null,M()});y.addEventListener("click",e=>{!i.isFinishOkay||!i.isStartOkay||i.startValue===i.finishValue||(A=u(r.value),I=u(o.value),!(!A||!I)&&(d&&d.forEach((a,n)=>{a._private.data.id===u(r.value)&&(a.removeClass("node-selected-finish"),a.addClass("node-selected-start")),a._private.data.id===u(o.value)&&(a.removeClass("node-selected-start"),a.addClass("node-selected-finish")),a._private.data.id!==u(r.value)&&a._private.data.id!==u(o.value)&&a.removeClass("node-selected-start node-selected-finish node-selected edge-selected-unique edge-selected-start edge-selected-finish edge-selected")}),H(A,I),D.classList.add("hidden"),S.classList.remove("hidden"),F.classList.remove("hidden"),C.classList.remove("hidden"),C.querySelector("h2").textContent=c.unit==="distance"?"SHORTEST PATH":"FASTEST PATH",C.querySelector("h3").textContent=`${d[0]._private.data.label} \u2014\u2014 ${d[d.length-1]._private.data.label}`,C.querySelector("h4").textContent=c.algorithm==="cyto-dijkstra"?"CYTOSCAPE'S DIJKSTRA":c.algorithm==="cyto-astar"?"CYTOSCAPE'S ASTAR":"OUR OWN DIJKSTRA",c.unit==="time"?(S.querySelector("h3").textContent="TRAVEL TIME",S.querySelector("h2").textContent=ee(O),F.querySelector("h2").textContent=`${T.toFixed(2)}ms`):(S.querySelector("h3").textContent="TRAVEL DISTANCE",S.querySelector("h2").textContent=`${new Intl.NumberFormat().format(O)}km`,F.querySelector("h2").textContent=`${T.toFixed(2)}ms`)))});p.addEventListener("click",e=>{if(!i.isFinishOkay||!i.isStartOkay||i.startValue===i.finishValue)return;const a=r.value;r.value=o.value,r.dispatchEvent(new Event("input")),o.value=a,o.dispatchEvent(new Event("input")),y.focus()});function H(e,a){if(c.algorithm==="cyto-dijkstra"){const f=performance.now(),v=h.elements().dijkstra(`#${e}`,function(V){return V.data(`${c.unit}`)},!0);d=v.pathTo(h.$(`#${a}`)),T=performance.now()-f,O=v.distanceTo(h.$(`#${a}`))}else if(c.algorithm==="cyto-astar"){const f=performance.now(),v=h.elements().aStar({root:`#${e}`,goal:`#${a}`,weight:function(V){return V.data(`${c.unit}`)},directed:!0});T=performance.now()-f,d=v.path,O=v.distance}let n=0,l=500;function s(){n<d.length&&(d[n]._private.group==="nodes"&&(n===0?d[n].addClass("node-selected-start"):n===d.length-1?d[n].addClass("node-selected-finish"):d[n].addClass("node-selected")),d[n]._private.group==="edges"&&(d.length===3?d[n].addClass("edge-selected-unique"):n===1?d[n].addClass("edge-selected-start"):n===d.length-2?d[n].addClass("edge-selected-finish"):d[n].addClass("edge-selected")),n++,setTimeout(s,l))}s()}const t={black:"#000",white:"#fff",red:"#f00",aqua:"aqua",aquadark:"#00cccc",aquadarker:"#006666",aqualight:"#87fff5",gray:"#636363",yellow:"#fff8a6",yellodark:"#5e5701",pink:"#ff8aad",purple:"#9147ff"},J=[{selector:"node",style:{"background-color":t.white,label:function(e){return e.data("label").length<=7?e.data("label"):`${e.data("label").slice(0,7)}.`},color:t.black,"text-halign":"center","text-valign":"center",width:100,height:100,"font-size":20,"font-weight":"bold","border-width":10,"border-color":t.white}}],Y=[{selector:"edge",style:{"transition-property":"line-color","transition-duration":"0.2s",width:1,"curve-style":"straight","line-style":"solid","font-size":12,"target-arrow-shape":"triangle","target-arrow-color":t.gray,"line-color":t.gray,color:t.aqua}}],G=[{selector:".node-selected",style:{"background-color":t.black,"border-width":10,"border-color":t.yellow,color:t.yellow}},{selector:".node-selected-start",style:{"transition-property":"background-color border-color","transition-duration":"0.2s","transition-timing-function":"ease-in-sine","background-color":t.black,"border-width":10,"border-color":t.aqualight,color:t.aqualight}},{selector:".node-selected-finish",style:{"transition-property":"background-color border-color","transition-duration":"0.2s","transition-timing-function":"ease-in-sine","background-color":t.black,"border-width":10,"border-color":t.pink,color:t.pink}},{selector:".node-selected-options",style:{"background-color":t.black,"border-width":5,"border-color":t.white,color:t.white}}],U=[{selector:".edge-selected",style:{width:10,"line-color":t.yellow,"target-arrow-color":t.yellow,"z-index":100,label:function(e){return c.unit==="distance"?`${new Intl.NumberFormat().format(e.data("distance"))}km`:`${e.data("time-label")}`},"text-background-color":t.yellow,"text-background-opacity":1,"text-background-shape":"round-rectangle","text-background-padding":"10px",color:t.yellodark,"font-size":"25px","font-weight":"bold"}},{selector:".edge-selected-unique",style:{width:10,"target-arrow-color":t.pink,"z-index":100,label:function(e){return c.unit==="distance"?`${new Intl.NumberFormat().format(e.data("distance"))}km`:`${e.data("time-label")}`},"text-background-color":t.yellow,"text-background-opacity":1,"text-background-shape":"round-rectangle","text-background-padding":"10px",color:t.yellodark,"font-size":"25px","font-weight":"bold","line-fill":"linear-gradient","line-gradient-stop-colors":`${t.aqualight} ${t.yellow} ${t.pink}`}},{selector:".edge-selected-start",style:{width:10,"target-arrow-color":t.yellow,"z-index":100,label:function(e){return c.unit==="distance"?`${new Intl.NumberFormat().format(e.data("distance"))}km`:`${e.data("time-label")}`},"text-background-color":t.yellow,"text-background-opacity":1,"text-background-shape":"round-rectangle","text-background-padding":"10px",color:t.yellodark,"font-size":"25px","font-weight":"bold","line-fill":"linear-gradient","line-gradient-stop-colors":`${t.aqualight} ${t.yellow} ${t.yellow}`}},{selector:".edge-selected-finish",style:{width:10,"target-arrow-color":t.pink,"z-index":100,label:function(e){return c.unit==="distance"?`${new Intl.NumberFormat().format(e.data("distance"))}km`:`${e.data("time-label")}`},"text-background-color":t.yellow,"text-background-opacity":1,"text-background-shape":"round-rectangle","text-background-padding":"10px",color:t.yellodark,"font-size":"25px","font-weight":"bold","line-fill":"linear-gradient","line-gradient-stop-colors":`${t.yellow} ${t.yellow} ${t.pink}`}},{selector:".edge-direct-path",style:{width:5,color:t.black,"target-arrow-color":t.white,"z-index":100,label:function(e){return c.unit==="distance"?`${new Intl.NumberFormat().format(e.data("distance"))}km`:`${e.data("time-label")}`},"text-background-color":t.white,"text-background-opacity":1,"text-background-shape":"round-rectangle","text-background-padding":"5px","font-size":"20px","font-weight":"normal","line-fill":"linear-gradient","line-gradient-stop-colors":`${t.white}`}}];function u(e){return e.trim().replace(/\s+/g,"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase()}function M(){h=R({container:document.getElementById("cy"),elements:j,style:[...J,...Y,...G,...U],layout:{name:"concentric",minNodeSpacing:80}}),h.on("click","node",function(e){e.originalEvent.altKey&&(k===0||k===2?(e.target.removeClass("node-selected-start"),e.target.removeClass("node-selected-finish"),e.target.addClass("node-selected-start"),r.value=e.target.id(),r.dispatchEvent(new Event("input")),k=1):k===1&&(e.target.removeClass("node-selected-start"),e.target.removeClass("node-selected-finish"),e.target.addClass("node-selected-finish"),o.value=e.target.id(),o.dispatchEvent(new Event("input")),y.dispatchEvent(new Event("click")),k++))}),h.on("mouseover","node",function(e){e.originalEvent.shiftKey&&(e.target.addClass("node-selected-options"),h.edges("[source='"+e.target.id()+"']").addClass("edge-direct-path"))}),h.on("mouseout","node",function(e){e.target.removeClass("node-selected-options"),h.edges("[source='"+e.target.id()+"']").removeClass("edge-direct-path")})}async function P(e){const l=await(await fetch(e)).body.getReader().read(),f=new TextDecoder("utf-8").decode(l.value);return _.parse(f,{header:!1}).data}function Q(e,a){if(!e)return null;const n=[];for(let l=1;l<e.length;l++)m.push(u(e[0][l])),n.push({group:"nodes",data:{id:u(e[0][l]),label:e[0][l]}});for(let l=1;l<e.length;l++)for(let s=1;s<e.length;s++)l!==s&&n.push({group:"edges",data:{id:u(`${e[l][0]}-${e[0][s]}`),source:u(e[l][0]),target:u(e[0][s]),distance:parseInt(e[l][s]),time:X(a[l][s]),"time-label":Z(a[l][s]),label:`${e[l][0]}-${e[0][s]}`}});return n}function X(e){const a=e.split(":");return+a[0]*60+ +a[1]}function Z(e){const a=e.split(":"),n=+a[0]==0?"":`${+a[0]}h`,l=+a[1]==0?"":`${+a[1]}m`;return`${n} ${l}`}function ee(e){const a=e/60,n=Math.floor(a),l=(a-n)*60,s=Math.round(l);return`${n}h ${s}m`}async function te(){try{K=await P("./co-distance.csv"),N=await P("./co-time.csv"),j=Q(K,N),M(),j.find(e=>e)}catch(e){throw new Error(e.message)}}te();
